<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Uploader Siêu Dễ</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f4f4f4; }
        .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        input { margin-bottom: 15px; }
        progress { width: 100%; height: 25px; }
        #status { margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Tải File Lên Kho Google</h1>
        <input type="file" id="fileInput">
        <br>
        <progress id="progressBar" value="0" max="100"></progress>
        <p id="status">Hãy chọn một file để bắt đầu</p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-storage-compat.js"></script>

    <script>
        // =================================================================
        // BƯỚC 1: DÁN CẤU HÌNH FIREBASE CỦA BẠN VÀO ĐÂY
        // =================================================================
        const firebaseConfig = {
            apiKey: "AIz...YKo", // Thay thế bằng key của bạn
            authDomain: "ten-du-an.firebaseapp.com",
            projectId: "ten-du-an",
            storageBucket: "ten-du-an.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123...abc"
        };
        // =================================================================

        // Khởi tạo Firebase
        firebase.initializeApp(firebaseConfig);
        const storage = firebase.storage();

        // Xử lý khi người dùng chọn file
        const fileInput = document.getElementById('fileInput');
        const progressBar = document.getElementById('progressBar');
        const status = document.getElementById('status');

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            // Tạo một đường dẫn độc nhất trên kho lưu trữ
            const storageRef = storage.ref('uploads/' + Date.now() + '-' + file.name);
            
            // Bắt đầu quá trình upload (Firebase tự động chia nhỏ file)
            const task = storageRef.put(file);

            task.on('state_changed',
                (snapshot) => {
                    // Cập nhật thanh tiến trình
                    const percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    progressBar.value = percentage;
                    status.textContent = `Đang tải lên... ${Math.round(percentage)}%`;
                },
                (error) => {
                    // Xử lý lỗi
                    console.error("Lỗi upload:", error);
                    status.textContent = 'Tải lên thất bại!';
                },
                () => {
                    // Xử lý khi thành công
                    status.textContent = 'Tải lên thành công!';
                    progressBar.value = 100;
                    console.log('File đã có trên kho!');
                }
            );
        });
    </script>
</body>
</html>
